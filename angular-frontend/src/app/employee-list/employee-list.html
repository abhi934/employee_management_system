<h2 class="text-center mt-3 mb-4">Employee List</h2>

<div class="d-flex justify-content-end align-items-center mb-2">

  <label class="me-2 mb-0 small">Rows per page:</label>
  <select class="form-select form-select-sm" style="width: auto;"
          (change)="setPageSize($any($event.target).value)">
    <option [selected]="pageSize===5"  value="5">5</option>
    <option [selected]="pageSize===10" value="10">10</option>
    <option [selected]="pageSize===20" value="20">20</option>
  </select>
</div>

<table class="table table-striped align-middle shadow-sm">
  <colgroup>
    <col /> 
    <col /> 
    <col /> 
    <col style="width: 120px" /> 
    <col style="width: 340px" /> 
  </colgroup>

  <thead class="table-dark">
    <tr>
      <th class="text-start">First Name</th>
      <th class="text-start">Last Name</th>
      <th class="text-start">Email ID</th>
      <th class="text-center">Status</th>
      <th class="text-end pe-3">Actions</th>
    </tr>
  </thead>

  <tbody>
    @for (employee of pagedEmployees; track employee.id) {
      <tr>
        <td class="text-start">{{ employee.firstName }}</td>
        <td class="text-start">{{ employee.lastName }}</td>
        <td class="text-start">{{ employee.emailId }}</td>

        <td class="text-center">
          <span [ngClass]="employee.isActive ? 'text-success fw-semibold' : 'text-danger fw-semibold'">
            {{ employee.isActive ? 'Active' : 'Inactive' }}
          </span>
        </td>


        <td class="text-end pe-3">
          <div class="btn-group" role="group" aria-label="Employee actions">
            <button
              (click)="employeeDetails(employee.id)"
              class="btn btn-secondary btn-sm">
              View
            </button>

            @if (isHR || isOwner(employee)) {
            <button
                (click)="updateEmployee(employee.id)"
                class="btn btn-info btn-sm">
                Update
            </button>
            }

            @if (isHR) {
            <button
                (click)="deleteEmployee(employee.id)"
                class="btn btn-danger btn-sm">
                Delete
            </button>
            }

            @if (isHR) {
            <button
                (click)="toggleActive(employee)"
                class="btn btn-warning btn-sm">
                {{ employee.isActive ? 'Deactivate' : 'Activate' }}
            </button>
            }
          </div>      
        </td>
      </tr>
    }
  </tbody>
</table>

<div class="d-flex justify-content-between align-items-center">
  <div class="small text-muted">
    Page {{ page }} of {{ totalPages }} â€¢
    Showing
    {{ pagedEmployees.length }}
    of {{ filteredEmployees.length }} {{ filteredEmployees.length === 1 ? 'employee' : 'employees' }}
  </div>

  <div class="btn-group">
    <button class="btn btn-outline-secondary btn-sm" (click)="prevPage()" [disabled]="page<=1">Prev</button>
    <button class="btn btn-outline-secondary btn-sm" (click)="nextPage()" [disabled]="page>=totalPages">Next</button>
  </div>
</div>